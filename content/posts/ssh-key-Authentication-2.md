---
title: "집 밖에서 집 컴퓨터로 원격 접속하기 2탄"
date: 2022-03-20T16:08:00+09:00
draft: true
description: "SSH(또는 Remote Desktop 등) 를 이용해 원격으로 집 컴퓨터에 접속해보자."
---

## 해야할 일
지난 글에서는 네트워크에 대한 설명을 적다보니 글이 너무 길어진 것 같다. 이번엔 원격접속을 위해 해야할 일을 정리하고 차례차례 소개하는 방법을 사용하려고 한다. 
원격에서 접속할 때 어려운 점은 외부 컴퓨터가 집 컴퓨터에 접속할 수 있는 정확한 IP주소를 알기 어렵다는 점, 그리고 필요한 경우 설정해야하는 일부 라우터 세팅이 어렵다는 점이다.  
우선 외부에서 안정적으로 접근이 가능하도록 하는 방법 먼저 알아보자.

## 시작하기에 앞서
가정에 설치된 개인 네트워크 장비를 설정하는 경우 원격접속을 위한 설정을 한다고 크게 문제 될 것은 없으나, 공용 네트워크기기 설정을 바꾸려고 시도하는 것은 자칫 보안 위협으로 여겨질 수도 있으니 반드시 개인 소유의 공유기(라우터)를 사용하는 경우에만 설정을 바꾸도록 하자. 통신사가 집에 설치해준 와이파이 기기도 대여해준 기간동안 사용자 소유이므로 설정을 바꿔도 괜찮다.  

### 상황 가정
- 독자님은 ssh(나 기타 프로그램)를 사용해 집 밖에서 집안의 컴퓨터로 접속하고 싶고 방법을 알고싶어한다.  
- a.독자님은 동적 공용IP주소를 할당받는 컴퓨터를 사용중이다.
- b.독자님의 컴퓨터는 라우터를 사용해 개인 IP주소를 할당받은 상태이다.

위 가정을 토대로 설명을 드릴 것이다. 만약 a나 b에 해당하지 않는다면 해야할 일이 줄어드는 셈이니 오히려 좋다.

#### a, b 모두 해당되지 않는 경우
축하드린다. 이 독자님들은 아래에 나올 IP주소 관련 설정을 생략하고 포트 설정만 해주면 된다. 이후엔 원격 접속 프로그램에 본인 컴퓨터가 할당받은 공용IP주소와 포트번호를 입력하기만 하면 된다. 아래와 같이..
```ssh <집 컴퓨터의 공용IP주소>:<포트번호>```

윈도우로 접속하는 경우 *Remote Desktop* 기능을 주로 사용한다. 윈도우에서 자체 지원하는 프로그램으로 외부에서 TeamViewer를 사용하듯 GUI환경으로 접속이 가능하다. TeamViewer를 사용하면 IP설정이 필요없지만 Remote Desktop만큼 빠르진 않다.  

mac OS, Linux환경으로 원격접속을 하기 위해선 ssh를 주로 사용한다. CLI(Command line interface)가 싫다면 *Screen sharing* 기능을 사용해 GUI(Graphic user interface) 환경으로 접속이 가능하다.  

윈도우를 CLI 환경에서 접속하고 싶다면 OpenSSH 같은 프로그램을 설치하여 SSH 서버를 활성화 시킨 뒤에 접속해야 한다.


### 내 컴퓨터는 동적 공용IP주소를 할당받는가? (a 에 해당되는지)
동적 공용IP주소를 사용하고 있는지 확인하기 위한 방법은 다음과 같다.

##### Mac OS
*시스템 설정 -> 네트워크 -> 고급 -> TCP/IP* 을 들어가면 IPv4 설정 칸 옆에 DHCP 사용중 이라고 표기된다면 동적 IP주소를 사용중인 것이다.

##### Windows 10
[이 글](https://uuitem.tistory.com/45)에서 (5)의 세부정보 확인 그림까지 따라 갔을 때 *DHCP 사용*부분이 예 로 돼 있으면 동적 IP주소를 할당받은 것이다.  

**단 IP주소가 192.168 로 시작되거나 서브넷 마스크가 255.255.255.0인 경우라면 라우터가 할당해준 개인 동적IP주소이므로 공용 IP주소가 동적IP인지 확인하기 위해서는 컴퓨터와 연결된 라우터의 설정창에서 확인해야 한다.**  

#### 라우터 설정창에 접속하기
요즘 판매되는 라우터(또는 공유기, 와이파이라고도 불림)의 대부분은 인터넷 브라우저로 접근가능한 설정페이지를 제공한다. 라우터 지식이 있다면 ID와 PASSWARD를 입력하여 로그인 하면 되고 잘 모르는 경우 라우터를 잘 살펴본 뒤 아래의 설명에 따라 라우터 설정창에 접속하면 되겠다.

##### IPTime 공유기(라우터)인 경우
[공유기 로그인 페이지](http://192.168.0.1)에 접속하면 로그인과 패스워드를 입력하라는 화면이 나온다. iptime은 사설 공유기이므로 맨 처음 설치할 때 아이디와 비밀번호를 설정하였을 것이다. 만약 다른 사람이 설치하였다면 해당 라우터의 권한을 갖고있는 분께 접속을 부탁드려야 한다.  
만약 본인의 공유기이고 비밀번호를 까먹었다면 공유기를 초기화하여 다시 아이디 생성과정을 거치는 방법도 있다.

로그인을 잘 하였다면 설정 아이콘을 눌러 더 자세한 설정을 할 수 있는데 첫 페이지에 DHCP로부터 할당받았는지에 대한 정보도 함께 보여진다.

##### SKT공유기(라우터)인 경우
[공유기 로그인 페이지](http://192.168.35.1)에 접속하면 아이디, 패스워드, 캡챠 문자를 입력해야 한다. [다른 블로그](https://rgy0409.tistory.com/3477)에서 SKT공유기에 로그인 하는 방법이 정리되어 있어 로그인할 때 참고하면 될 것 같다.

접속에 성공했을 경우 첫 페이지에 WAN 설정정보의 IPv4연결방법 란을 보면 된다.

##### 그 외
통신사에서 제공하는 라우터는 보통 물리적 접근이 가능할 경우 SKT의 라우터처럼 아이디, 패스워드를 알아낼 수 있도록 배려해놓았다. 인터넷에 *OO사 공유기 로그인 방법* 이라고 검색하면 약간의 수고를 통해 로그인에 성공할 수 있을 것이다.  

### 동적 공용IP를 사용하는 경우
확인하면 공용IP주소의 십중팔구는 DHCP로부터 할당을 받은 동적IP주소일 것이다. **DDNS서비스** 를 사용해 외부에서 안정적으로 접근 가능하도록 해주어야 한다.

#### 특수케이스 : IPtime 공유기를 사용하는 경우
고맙게도 IPtime 제조사는 공유기가 사용할 수 있는 Domain Name과 DDNS서비스를 무료로 제공한다.  위의 공유기 설정페이지로 접속해 로그인한다음 다음의 절차를 따르면 된다.
- 고급 설정 ->  유틸리티 -> DDNS -> Host name 에 원하는 주소를 입력하고 UserID에 이메일 주소를 입력 -> 등록하기 클릭
이렇게 DDNS를 등록할 경우 외부에서 이 공유기에 접속할 때 <Host name>.iptime.org 를 입력하면 된다. 공유기에서 컴퓨터까지 접속하기 위해서는 Port(포트)와 관련된 설정을 해주어야 한다. 방법은 후술하겠다.

#### 그외의 경우
1000원을 사용해야 할 시간이 왔다. 이 1000원은 바로 Domain Name을 사기 위한 비용이다. 친절한 일부 서비스는 무료로 제공하는 경우도 있으나 찾기가 쉽지 않고 그냥 개인 도메인네임을 구매하는 것이 시간을 아끼는 길이다.  
판매처는 다양하다. [외국 서비스](https://kr.godaddy.com/)도 있고 국내 서비스도 있다. 나는 [호스팅 케이알](https://domains.hosting.kr)에서 1년 단위로 도메인 네임을 구매하고 있다. 잘 찾아보면 할인 혜택이 많이 붙은 것도 있고, 외국 서비스까지 검색의 폭을 넓혀보면 연 1000원대에 도메인 이름을 구매하는 것이 가능하다. 보통 첫 1년은 반값 세일을 해주는 경우가 많은데 1년만 사용하고 갱신 없이 다른 도메인으로 구매하는 꼼수도 있다.  
끝이 .com 으로 끝나는 경우 좀 비싼편이고 xyz 같은 ~~듣보잡~~도메인은 저렴한 편이다. 나는 집 컴퓨터에 접근만 가능하면 별다른 욕심이 없기때문에 가장 싼 도메인을 적당히 구매하는 편이다. 마음에 드는 도메인 이름으로 검색해 보고 가격이 괜찮다 싶으면 결제하면 된다. 도메인 구매시 집주소같은 민감한 정보를 요구하는데 개인정보는 소중하니 시베리아 한가운데로 써도 무방하다. [이 기사](https://newsis.com/view/?id=NISX20140205_0012701750)에 따르면 이런 민감정보를 공개적으로 박제하는 것이 외국 회사 정책이라는데 피해가 생겨도 책임져줄 것도 아니고 좀 꼬우니 자기들만 생각하는 정책은 무시하도록 하자.

#### 도메인 구매 이후
도메인을 새로 구입한 경우 



<!--
## 맥 설정 바꾸기

윈도우에서 에러 발생시 새로 만들어야함
https://www.lesstif.com/software-architect/ssh-load-key-invalid-format-openssh-rsa-106856464.html

패스워드 입장 막기
https://www.cyberciti.biz/faq/how-to-disable-ssh-password-login-on-linux/

맥 ssh 세팅 리스타트
https://devlog.jwgo.kr/2019/07/03/how-do-i-check-if-a-service-is-running-in-mac/

ssh, 호스트 클라이언트 인증
https://scriptingosx.com/2017/07/ssh-keys-part-2-client-verification/

-->
